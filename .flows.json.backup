[{"id":"be761311.d660d","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"6c787050.28e32","type":"tab","label":"Configuraciones","disabled":false,"info":""},{"id":"9040e221.4609d","type":"subflow","name":"Motor Controller","info":"Expects different messages\nAn \"On\" message and a \"Direction\" message","in":[{"x":25,"y":219,"wires":[{"id":"31316852.009dc8"}]}],"out":[{"x":1050,"y":91,"wires":[{"id":"e859b42e.a24f98","port":0},{"id":"11fcaa0.fc45d56","port":0}]},{"x":1053,"y":164,"wires":[{"id":"e859b42e.a24f98","port":0},{"id":"42ead490.1781cc","port":0}]},{"x":289,"y":67,"wires":[{"id":"31316852.009dc8","port":0}]}]},{"id":"31316852.009dc8","type":"switch","z":"9040e221.4609d","name":"Split Messages","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"Speed","vt":"str"},{"t":"eq","v":"On","vt":"str"},{"t":"eq","v":"Direction","vt":"str"}],"checkall":"true","outputs":3,"x":165,"y":228,"wires":[["1e968574.26a39b"],["e859b42e.a24f98","3f88efc0.efd6"],["e5de9f4c.7162c"]]},{"id":"e859b42e.a24f98","type":"switch","z":"9040e221.4609d","name":"Off","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"}],"checkall":"true","outputs":1,"x":494,"y":199,"wires":[["47da893e.1c9908","9845a66f.f553a8"]]},{"id":"47da893e.1c9908","type":"debug","z":"9040e221.4609d","name":"Motor 1","active":true,"console":"false","complete":"payload","x":1099,"y":31.5,"wires":[]},{"id":"9845a66f.f553a8","type":"debug","z":"9040e221.4609d","name":"Motor 2","active":true,"console":"false","complete":"payload","x":1095,"y":226.5,"wires":[]},{"id":"3f88efc0.efd6","type":"switch","z":"9040e221.4609d","name":"On","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","outputs":1,"x":493,"y":263,"wires":[["11fcaa0.fc45d56"]]},{"id":"4ab975db.9e25bc","type":"change","z":"9040e221.4609d","name":"Set Direction Clockwise","rules":[{"t":"set","p":"direction","pt":"flow","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":477,"y":358,"wires":[["11fcaa0.fc45d56"]]},{"id":"4582ae3.cebcb5","type":"change","z":"9040e221.4609d","name":"Set Direction Counter Clockwise","rules":[{"t":"set","p":"direction","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":417,"wires":[["11fcaa0.fc45d56"]]},{"id":"11fcaa0.fc45d56","type":"function","z":"9040e221.4609d","name":"Get Direction","func":"var direction = flow.get('direction')||0;\nmsg.payload = direction;\nreturn msg;","outputs":1,"noerr":0,"x":713,"y":300,"wires":[["47da893e.1c9908","42ead490.1781cc"]]},{"id":"42ead490.1781cc","type":"function","z":"9040e221.4609d","name":"Invert","func":"if (msg.payload == 1) {\n    msg.payload = 0;\n}\nelse\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":901,"y":303,"wires":[["9845a66f.f553a8"]]},{"id":"e5de9f4c.7162c","type":"switch","z":"9040e221.4609d","name":"Direction","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","outputs":2,"x":253,"y":398,"wires":[["4ab975db.9e25bc"],["4582ae3.cebcb5"]]},{"id":"1e968574.26a39b","type":"debug","z":"9040e221.4609d","name":"Motor Speed","active":true,"console":"false","complete":"payload","x":353,"y":127.5,"wires":[]},{"id":"204fedb6.eec462","type":"rpi-gpio out","z":"be761311.d660d","name":"Right Motor Speed (PWM)","pin":"8","set":"","level":"0","out":"pwm","x":700,"y":200,"wires":[]},{"id":"95d47556.843168","type":"inject","z":"be761311.d660d","name":"Slow","topic":"Speed","payload":"20","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":"","x":130,"y":60,"wires":[["e4795ee7.405a2"]]},{"id":"9a22465f.d8e658","type":"inject","z":"be761311.d660d","name":"Fast","topic":"Speed","payload":"45","payloadType":"num","repeat":"","crontab":"","once":false,"x":130,"y":100,"wires":[["e4795ee7.405a2"]]},{"id":"cf070f82.136f9","type":"rpi-gpio out","z":"be761311.d660d","name":"Right Motor Pin 1","pin":"19","set":true,"level":"0","out":"out","x":670,"y":80,"wires":[]},{"id":"6f9e6276.0663ac","type":"inject","z":"be761311.d660d","name":"Go","topic":"On","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":135,"y":147.5,"wires":[["e4795ee7.405a2"]]},{"id":"458234a.7de5acc","type":"inject","z":"be761311.d660d","name":"Stop","topic":"On","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":135,"y":196,"wires":[["e4795ee7.405a2"]]},{"id":"1b4558e1.eb1317","type":"rpi-gpio out","z":"be761311.d660d","name":"Right Motor Pin 2","pin":"22","set":true,"level":"0","out":"out","x":670,"y":140,"wires":[]},{"id":"f64665d2.bfdd78","type":"inject","z":"be761311.d660d","name":"Forward","topic":"Direction","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":150,"y":251.5,"wires":[["e4795ee7.405a2"]]},{"id":"61ad1919.faf808","type":"inject","z":"be761311.d660d","name":"Backwards","topic":"Direction","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":150,"y":300,"wires":[["e4795ee7.405a2"]]},{"id":"e4795ee7.405a2","type":"subflow:9040e221.4609d","z":"be761311.d660d","name":"","env":[],"x":422,"y":159.5,"wires":[["cf070f82.136f9"],["1b4558e1.eb1317"],["204fedb6.eec462"]]},{"id":"2abc1396.0432cc","type":"inject","z":"6c787050.28e32","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":340,"y":120,"wires":[["2b44687c.7cc448"]]},{"id":"2b44687c.7cc448","type":"exec","z":"6c787050.28e32","command":"sudo halt","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"Apagar","x":520,"y":120,"wires":[[],[],[]]}]