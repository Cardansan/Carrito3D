[{"id":"f2d50a30.f36618","type":"tab","label":"Dashboard","disabled":false,"info":""},{"id":"e18da4f3.5835c8","type":"tab","label":"Interfaz Teléfono","disabled":false,"info":""},{"id":"edaabd89.17687","type":"tab","label":"Radar","disabled":true,"info":""},{"id":"75bbb4d6.125e1c","type":"tab","label":"Salidas GPIO","disabled":false,"info":""},{"id":"cf5e82b7.0252e","type":"tab","label":"Cámara","disabled":false,"info":""},{"id":"fa2d5faa.02b","type":"tab","label":"On Init","disabled":false,"info":""},{"id":"9cafc7a.68acc38","type":"tab","label":"Sistema (Exec)","disabled":false,"info":""},{"id":"ac3d1312.01aae","type":"tab","label":"Google Home ","disabled":false,"info":""},{"id":"3c70d9e1.8b9426","type":"tab","label":"Ngrok","disabled":false,"info":""},{"id":"5ffba829.d0aa18","type":"tab","label":"Telegram","disabled":false,"info":""},{"id":"2da2b35e.ce678c","type":"subflow","name":"GoogleHomeNotification","info":"","in":[{"x":50,"y":30,"wires":[{"id":"687a9f02.3bc6d"}]}],"out":[]},{"id":"297d98cf.7fbae8","type":"ui_base","z":0,"theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#cc0000","baseFont":"Courier,monospace","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#cc0000","edited":true},"page-titlebar-backgroundColor":{"value":"#cc0000","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#ff1a1a","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#cc0000","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"Courier,monospace"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"5fc7646b.c2b3dc","type":"ui_group","z":0,"name":"Motor Derecho","tab":"4594135a.ba6d1c","disp":true,"width":"6","collapse":false},{"id":"97fc8fdd.1b98f","type":"ui_group","z":0,"name":"Todo","tab":"4594135a.ba6d1c","disp":true,"width":"6","collapse":false},{"id":"db519559.6bab38","type":"ui_group","z":0,"name":"Motor Izquierdo","tab":"4594135a.ba6d1c","disp":true,"width":"6","collapse":false},{"id":"d07b0629.bfe388","type":"ui_group","z":"","name":"Botones","tab":"","disp":false,"width":"6","collapse":false},{"id":"14536bd0.490ea4","type":"ui_group","z":0,"name":"Apagado","tab":"4594135a.ba6d1c","disp":true,"width":"2","collapse":true},{"id":"4e88c210.bf9cac","type":"ui_group","z":0,"name":"D","tab":"","disp":true,"width":"6","collapse":false},{"id":"cc65aad1.dacdc8","type":"ui_group","z":0,"name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"4594135a.ba6d1c","type":"ui_tab","z":0,"name":"Motores","icon":"dashboard","disabled":false,"hidden":false},{"id":"fa0442b2.5a3d1","type":"ui_group","z":"","name":"Cámara","tab":"","disp":false,"width":"6","collapse":false},{"id":"ad6ed8bd.649658","type":"ui_tab","z":"","name":"Autónomo","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"6f7c3b98.411e14","type":"ui_group","z":"","name":"Setup","tab":"ad6ed8bd.649658","order":1,"disp":true,"width":"6","collapse":false},{"id":"8714eca8.27de2","type":"mqtt-broker","z":"","name":"","broker":"web.inventoteca.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"504d9cda.7d0854","type":"ui_group","z":"","name":"WiFi","tab":"9c9c4a97.ee0658","order":2,"disp":true,"width":"6","collapse":true},{"id":"9c9c4a97.ee0658","type":"ui_tab","z":"","name":"Sistema","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"aaad0e65.b3469","type":"ui_group","z":"","name":"Botones","tab":"406d2d02.248ea4","order":2,"disp":false,"width":"6","collapse":false},{"id":"d0600652.9f6778","type":"ui_group","z":"","name":"Apagar","tab":"9c9c4a97.ee0658","disp":true,"width":"6","collapse":false},{"id":"10bf36d5.d34829","type":"ui_group","z":"","name":"Cámara","tab":"406d2d02.248ea4","order":1,"disp":false,"width":"6","collapse":false},{"id":"406d2d02.248ea4","type":"ui_tab","z":"","name":"Control","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"e8574371.228a7","type":"ui_group","z":"","name":"Parámetros de Manejo","tab":"9c9c4a97.ee0658","disp":true,"width":"6","collapse":false},{"id":"30684173.e2231e","type":"googlehome-config-node-offline","z":"2da2b35e.ce678c","ipaddress":"192.168.20.194","name":"Google Home","language":"fr"},{"id":"e12130ea.34705","type":"googlehome-config-node-offline","z":"2da2b35e.ce678c","ipaddress":"192.168.20.197","name":"Google Home Mini","language":"fr"},{"id":"5ebdb320.8a967c","type":"googlehome-config-node-offline","z":"","ipaddress":"192.168.1.45","name":"Inventoteca Home Mini","language":"es"},{"id":"a8bd6396.c389b","type":"ngrokauth","z":"3c70d9e1.8b9426"},{"id":"3ad0e292.3924ce","type":"telegrambot-config","z":"","botname":"elbot","usernames":"","chatIds":"","pollInterval":"300"},{"id":"7ab72cee.d66ef4","type":"telegrambot-config","z":"","botname":"RedFire","usernames":"","chatIds":"","pollInterval":"300"},{"id":"24e743f9.df8a9c","type":"ui_group","z":"","name":"Default","tab":"152744c.c4b16bb","disp":true,"width":"6"},{"id":"152744c.c4b16bb","type":"ui_tab","z":"","name":"testing","icon":"dashboard"},{"id":"c0b5cad1.5f2b38","type":"rpi-srf","z":"edaabd89.17687","name":"Frente","topic":"SRF","pulse":"0.06","pins":"21,22","x":90,"y":200,"wires":[["24e4dbec.219594","f9fa9cbb.ebddb"]]},{"id":"76609cbd.8da214","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Izquierda-B","host":"localhost","port":8888,"pin":"22","set":"","level":"0","out":"pwm","sermin":"1000","sermax":"2000","x":690,"y":420,"wires":[]},{"id":"7d2b2998.7f1de8","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Izquierda-A","host":"localhost","port":8888,"pin":"23","set":"","level":"0","out":"pwm","sermin":"1000","sermax":"2000","x":690,"y":360,"wires":[]},{"id":"3f1dd469.6dac1c","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Derecha-B","host":"localhost","port":8888,"pin":"18","set":"","level":"0","out":"pwm","sermin":"1000","sermax":"2000","x":690,"y":540,"wires":[]},{"id":"346f5ced.7e90a4","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Derecha-A","host":"localhost","port":8888,"pin":"17","set":"","level":"0","out":"pwm","sermin":"1000","sermax":"2000","x":690,"y":480,"wires":[]},{"id":"2a0e4e43.cf7892","type":"inject","z":"edaabd89.17687","name":"","topic":"","payload":"","payloadType":"str","repeat":"0.1","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":380,"wires":[["cb8984a.a4a7678"]]},{"id":"26e7239.1c70ddc","type":"function","z":"edaabd89.17687","name":"barrido-sensor","func":"var pos = global.get('posRadar');\nvar subida = flow.get('subida');\nvar dist = flow.get('dist')\n//var posiciones = flow.get();\n\nif(subida === true)\n{\n  pos = pos +5;\n  if(pos >= 75)\n  {\n      flow.set('subida',false);\n      pos = 75;\n  }\n}\nelse\n{\n  pos = pos -5;\n  if(pos <= 20)\n  {\n      flow.set('subida',true);\n      pos = 20;\n  }\n}\n\n\nvar msg2 = {payload: pos}\n\nmsg = {topic: pos.toString()};\nmsg = {payload: dist};\nglobal.set('posRadar',pos);\nflow.set('posAtr',pos + 75);\n\n\nreturn [msg,msg2];","outputs":2,"noerr":0,"x":480,"y":380,"wires":[[],["113a338b.8cf1bc","9f27cb59.1220c8"]]},{"id":"cb8984a.a4a7678","type":"switch","z":"edaabd89.17687","name":"radar?","property":"radar","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":380,"wires":[["26e7239.1c70ddc"]]},{"id":"ef94a7c2.950108","type":"change","z":"edaabd89.17687","name":"","rules":[{"t":"set","p":"dist","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":200,"wires":[["3ed329bc.bffc06"]]},{"id":"3ed329bc.bffc06","type":"change","z":"edaabd89.17687","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"posRadar","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":200,"wires":[["7ce41758.1d99d8","65fe454d.679b4c","2925cc54.a01064"]]},{"id":"24e4dbec.219594","type":"smooth","z":"edaabd89.17687","name":"","property":"payload","action":"mean","count":"3","round":"0","mult":"single","reduce":true,"x":260,"y":200,"wires":[["ef94a7c2.950108","d70dcc55.ef8d"]]},{"id":"1bc1ae04.d0e0d2","type":"inject","z":"9cafc7a.68acc38","name":"","topic":"","payload":"sudo reboot","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":120,"wires":[["43696cf9.54a394"]]},{"id":"43696cf9.54a394","type":"exec","z":"9cafc7a.68acc38","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":430,"y":120,"wires":[[],[],[]]},{"id":"d10a7b13.7420d8","type":"inject","z":"9cafc7a.68acc38","name":"","topic":"","payload":"sudo halt","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":200,"wires":[["6233929.7aac46c"]]},{"id":"6233929.7aac46c","type":"exec","z":"9cafc7a.68acc38","command":"sudo halt","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":440,"y":200,"wires":[[],[],[]]},{"id":"7ce41758.1d99d8","type":"function","z":"edaabd89.17687","name":"direccion-automatica","func":"var pos = msg.topic;\nvar dist = msg.payload;\nvar posiciones = global.get('posiciones')|| Array(10);\nvar max;\nvar sector;\nvar distMin = global.get('distMin')||100;  // Distancia minima\nvar distProm = global.get('distProm')||distMin;\n\npos = (pos/5)-4;\n \nposiciones[pos] = dist;\n\nmax = Math.max.apply(null,posiciones);\nsector = posiciones.indexOf(max);\n\nif((max < distMin) || (distProm < distMin))\n{\n    global.set('reversa',true);\n}\nelse\n{\n   global.set('reversa',false); \n}\n\nglobal.set('posiciones',posiciones);\nglobal.set('max',max);\nglobal.set('sector',sector);\n\nmsg = {payload:sector};\nvar msg2 = {payload:max};\n\nreturn [msg,msg2];","outputs":2,"noerr":0,"x":820,"y":160,"wires":[["b10eb39c.2990d"],[]]},{"id":"64d4883c.c261e8","type":"function","z":"75bbb4d6.125e1c","name":"motores","func":"var reversa = global.get('reversa');\nvar radar = global.get('radar');\nvar auto = global.get('auto');\nvar motDA, motDB, motIA, motIB;\nvar velMax = global.get('velMax')||100;\nvar pwmD = velMax;\nvar pwmI = velMax;\nvar sector = global.get('sector')||5;\nvar motores = global.get('motores')||false;\n\n\n\nif(reversa === true)\n{\n    if((sector < 4)) // Esta libre la izquierda\n    {\n       pwmI = velMax;\n       pwmD = velMax - (Math.abs((sector - 4)*10));\n    }\n    else if(sector > 5) // esta libre la derecha\n    {\n        pwmI = velMax - (Math.abs((5 - sector)*10));\n        pwmD = velMax;\n    }\n    else\n    {\n        pwmI= velMax;\n        pwmD = velMax;\n    }\n}\nelse\n{\n   if((sector < 4)) // Esta libre la izquierda\n    {\n       pwmI = velMax - (Math.abs((sector - 4)*10));\n       pwmD = velMax;\n    }\n    else if(sector > 5) // esta libre la derecha\n    {\n        pwmI = velMax;\n        pwmD = velMax - (Math.abs((5 - sector)*10));\n    }\n    else\n    {\n        pwmI= velMax;\n        pwmD = velMax;\n    } \n}\n\nif((reversa === true) && ((auto === true) || motores === true)) // No hay reversa\n{\n    motDA = {payload:0};\n    motDB = {payload:pwmD};\n    motIA = {payload:0};\n    motIB = {payload:pwmI};\n}\nelse if((reversa === false) && ((auto === true) || (motores === true)))\n{\n    motDA = {payload:pwmD};\n    motDB = {payload:0};\n    motIA = {payload:pwmI};\n    motIB = {payload:0};\n}\nelse\n{\n    motDA = {payload:0};\n    motDB = {payload:0};\n    motIA = {payload:0};\n    motIB = {payload:0};\n}\n\nreturn [motIA,motIB,motDA,motDB];","outputs":4,"noerr":0,"x":280,"y":460,"wires":[["556918e7.34b298"],["f7277129.8563c"],["5c8c2bfe.279a24"],["d15d94e.7096d68"]]},{"id":"95cefd1c.670de","type":"link in","z":"75bbb4d6.125e1c","name":"motores-radar","links":["1ebd748.7289e8c","c4d42682.d7f8b8","66589071.1813e","6268e87c.cc5128"],"x":155,"y":460,"wires":[["64d4883c.c261e8"]]},{"id":"b5f8c48a.0f9938","type":"ui_slider","z":"f2d50a30.f36618","name":"","label":"Velocidad Máxima","tooltip":"","group":"6f7c3b98.411e14","order":8,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":"35","max":"100","step":1,"x":270,"y":100,"wires":[["8b5d3f57.4ad0a"]]},{"id":"8b5d3f57.4ad0a","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"velMax","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":100,"wires":[[]]},{"id":"80f0777d.2a3728","type":"ui_slider","z":"f2d50a30.f36618","name":"","label":"Distancia Minima","tooltip":"","group":"6f7c3b98.411e14","order":3,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":"0","max":"100","step":1,"x":270,"y":160,"wires":[["9e67312b.f692b"]]},{"id":"9e67312b.f692b","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"distMin","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":160,"wires":[[]]},{"id":"6389cefa.d985b","type":"smooth","z":"edaabd89.17687","name":"","property":"payload","action":"mean","count":"6","round":"0","mult":"single","reduce":true,"x":260,"y":240,"wires":[[]]},{"id":"d70dcc55.ef8d","type":"change","z":"edaabd89.17687","name":"","rules":[{"t":"set","p":"distProm","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":240,"wires":[["246d9f32.d6a76"]]},{"id":"4a3a1dfe.325024","type":"ui_text_input","z":"f2d50a30.f36618","name":"","label":"SSID","tooltip":"","group":"504d9cda.7d0854","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"","x":250,"y":640,"wires":[["ca2fdcae.66573"]]},{"id":"ca2fdcae.66573","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"ssid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":640,"wires":[[]]},{"id":"cacd2695.e682c8","type":"ui_text_input","z":"f2d50a30.f36618","name":"","label":"KEY","tooltip":"","group":"504d9cda.7d0854","order":2,"width":0,"height":0,"passthru":true,"mode":"password","delay":"0","topic":"","x":250,"y":680,"wires":[["64d764c9.0665fc"]]},{"id":"64d764c9.0665fc","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"psk","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":680,"wires":[[]]},{"id":"dd8692e7.5b88c","type":"ui_button","z":"f2d50a30.f36618","name":"","group":"504d9cda.7d0854","order":3,"width":0,"height":0,"passthru":false,"label":"Agregar WiFi","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"Nueva Red","x":210,"y":720,"wires":[["be78467e.563ba8"]]},{"id":"5cf4cdcb.edda24","type":"link out","z":"f2d50a30.f36618","name":"ui-agregar-wifi","links":["ed3882d8.7146b"],"x":495,"y":720,"wires":[]},{"id":"be78467e.563ba8","type":"ui_toast","z":"f2d50a30.f36618","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"Agregar","cancel":"Cancelar","raw":false,"topic":"¿Seguro que deseas agregar una nueva red?","name":"¿Seguro?","x":380,"y":720,"wires":[["5cf4cdcb.edda24"]]},{"id":"3f6fbbbc.871304","type":"link in","z":"f2d50a30.f36618","name":"ui-ssid","links":["3c26d40b.da127c","c0d73a10.7dc578","dbccc2e8.34c09"],"x":155,"y":640,"wires":[["4a3a1dfe.325024"]]},{"id":"ed3882d8.7146b","type":"link in","z":"9cafc7a.68acc38","name":"sistema-agregar-wifi","links":["5cf4cdcb.edda24"],"x":575,"y":120,"wires":[["ba846a4.8285298"]]},{"id":"d6c82209.681cd","type":"comment","z":"9cafc7a.68acc38","name":"Agregar WiFi","info":"","x":630,"y":60,"wires":[]},{"id":"f542739d.705a9","type":"exec","z":"9cafc7a.68acc38","command":"ifconfig wlan0","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":340,"y":480,"wires":[["5edcabd.963a154"],[],[]]},{"id":"d4e769ef.056b98","type":"link out","z":"9cafc7a.68acc38","name":"sistema-respuesta-ip","links":["eb46a588.815758","b510fec8.36b0b"],"x":1055,"y":500,"wires":[]},{"id":"f4aee5aa.232f88","type":"comment","z":"9cafc7a.68acc38","name":"IP","info":"","x":90,"y":460,"wires":[]},{"id":"af0d111e.da0d7","type":"switch","z":"9cafc7a.68acc38","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"inet","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":650,"y":480,"wires":[["9ef51f9c.f0cc"]]},{"id":"5edcabd.963a154","type":"split","z":"9cafc7a.68acc38","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":490,"y":480,"wires":[["af0d111e.da0d7"]]},{"id":"555f1e00.29c734","type":"debug","z":"9cafc7a.68acc38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":990,"y":460,"wires":[]},{"id":"9ef51f9c.f0cc","type":"switch","z":"9cafc7a.68acc38","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"inet6","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":810,"y":480,"wires":[[],["555f1e00.29c734","d4e769ef.056b98"]]},{"id":"a99d383.5cce4c8","type":"exec","z":"9cafc7a.68acc38","command":"iwconfig wlan0","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":340,"y":560,"wires":[["6c75bd30.dc3394"],["6c75bd30.dc3394"],["6c75bd30.dc3394"]]},{"id":"b8dbe259.b5ed","type":"debug","z":"9cafc7a.68acc38","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":990,"y":540,"wires":[]},{"id":"4c8a71fe.43a7e","type":"switch","z":"9cafc7a.68acc38","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ESSID:","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":560,"wires":[["41670cc3.f039c4"]]},{"id":"6c75bd30.dc3394","type":"split","z":"9cafc7a.68acc38","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":490,"y":560,"wires":[["4c8a71fe.43a7e"]]},{"id":"41670cc3.f039c4","type":"split","z":"9cafc7a.68acc38","name":"","splt":":","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":730,"y":560,"wires":[["78cad8ac.3834a8"]]},{"id":"78cad8ac.3834a8","type":"switch","z":"9cafc7a.68acc38","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ESSID","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":850,"y":560,"wires":[["b8dbe259.b5ed"],["3c26d40b.da127c"]]},{"id":"3c26d40b.da127c","type":"link out","z":"9cafc7a.68acc38","name":"sistema-ssid","links":["3f6fbbbc.871304"],"x":1055,"y":580,"wires":[]},{"id":"eac3a15c.745b6","type":"ui_text","z":"f2d50a30.f36618","group":"504d9cda.7d0854","order":4,"width":0,"height":0,"name":"Show IP","label":"IP","format":"{{msg.payload}}","layout":"row-spread","x":440,"y":760,"wires":[]},{"id":"b510fec8.36b0b","type":"link in","z":"f2d50a30.f36618","name":"ui-ip","links":["d4e769ef.056b98"],"x":155,"y":760,"wires":[["eac3a15c.745b6"]]},{"id":"dbad5709.20a148","type":"inject","z":"9cafc7a.68acc38","name":"WiFi Reboot","topic":"","payload":"","payloadType":"date","repeat":"60","crontab":"","once":false,"onceDelay":"60","x":140,"y":520,"wires":[["f542739d.705a9","a99d383.5cce4c8"]]},{"id":"6c4e5a06.7b3ae4","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"Adelante","order":3,"width":"2","height":"1","format":"<div class=\"momentaryad vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#c0392b\"> \n    <i class=\"fa fa-arrow-up fa-2x\"></i>\n</md-button>\n</center>\n</div>\n<script>\n(function($scope) {\n$('.momentaryad').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior}\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryad').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":240,"y":220,"wires":[["706ecacb.1e95d4","37d31fda.35ee1","4006c2d6.149f3c"]]},{"id":"6ab887bb.4cea28","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"Derecha","order":7,"width":"2","height":"1","format":"<div class=\"momentaryder vibrate filled touched bigfont rounded\" style=\"background-color:#009999\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#009999\">  \n   <i class=\"fa fa-arrow-right fa-2x\" aria-hidden=\"true\"></i>\n<script>\n(function($scope) {\n$('.momentaryder').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryder').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n</md-button>\n</center>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":240,"y":600,"wires":[[]]},{"id":"3fd9ec73.1e8b64","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"arriba der","order":4,"width":"2","height":"1","format":"<div class=\"momentaryarder vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#c0392b\">  \n    <i class=\"fa fa-reply fa-2x fa-flip-horizontal\"></i>\n</md-button> \n</center>\n</div>\n<script>\n(function($scope) {\n$('.momentaryarder').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryarder').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":240,"y":180,"wires":[["706ecacb.1e95d4","4006c2d6.149f3c","d2fbbcf6.0bab8"]]},{"id":"269602e8.c7f11e","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"Izquierda","order":5,"width":"2","height":"1","format":"<div class=\"momentaryiz vibrate filled touched bigfont rounded\" style=\"background-color:#009999\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#009999\"> \n    <i class=\"fa fa-arrow-left fa-2x\" aria-hidden=\"true\"></i>\n</md-button>\n</center>\n</div>\n<script>\n(function($scope) {\n$('.momentaryiz').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryiz').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":240,"y":560,"wires":[[]]},{"id":"c8039da2.d0fb9","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"Centro","order":6,"width":"2","height":"1","format":"   \n<div class=\"momentarycen vibrate filled touched bigfont rounded\" style={{(msg.payload)}}>\n<center>\n<md-button class=\"filled touched bigfont rounded\" style={{(msg.payload)}}> \n    Motores<br/><i class=\"fa fa-power-off\" aria-hidden=\"true\"></i>\n</md-button>\n</center>\n</div>\n\n<script>\n(function($scope) {\n$('.momentarycen').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentarycen').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    //$scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":230,"y":440,"wires":[["1a8da62c.120a2a"]]},{"id":"9ebba8e0.bdc608","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"abajo iz","order":8,"width":"2","height":"1","format":" <div class=\"momentaryabiz vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#c0392b\"> \n    <i class=\"fa fa-reply fa-2x fa-flip-vertical\"></i>\n</md-button>\n</center>\n</div>\n\n<script>\n(function($scope) \n{\n$('.momentaryabiz').on('touchstart mousedown', function(e) \n    {\n        e.preventDefault(); //prevent default behavior\n        navigator.vibrate(30);\n        $scope.send({\"payload\": 1});\n    });\n\n$('.momentaryabiz').on('touchend mouseup', function(e) \n    {\n        e.preventDefault(); //prevent default behavior\n        $scope.send({\"payload\": 0});\n    });\n})(scope);\n</script>\n\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":240,"y":340,"wires":[["d87a71a0.3d1a8","4006c2d6.149f3c","99e2e07.362e12"]]},{"id":"4aef5a39.6398a4","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"Atrás","order":9,"width":"2","height":"1","format":"<div class=\"momentaryat vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button \n   class=\"filled touched bigfont rounded\" \n   style=\"background-color:#c0392b\">\n   <i class=\"fa fa-arrow-down fa-2x\" aria-hidden=\"true\"></i>\n</md-button> \n</center>\n<script>\n(function($scope) {\n$('.momentaryat').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryat').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n</div>\n\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":230,"y":260,"wires":[["d87a71a0.3d1a8","37d31fda.35ee1","4006c2d6.149f3c"]]},{"id":"6963cf7b.054b6","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"arriba Iz","order":2,"width":"2","height":"1","format":"<div class=\"momentaryariz vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button class=\"filled touched bigfont rounded\" style=\"background-color:#c0392b\"> \n    <i class=\"fa fa-reply fa-2x\"></i>\n</md-button>\n</center>\n</div>\n\n<script>\n(function($scope) {\n$('.momentaryariz').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryariz').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":240,"y":140,"wires":[["706ecacb.1e95d4","4006c2d6.149f3c","99e2e07.362e12","2fa68488.0814dc"]]},{"id":"8d6294c1.8a8ec8","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"Formato botones","order":1,"width":"0","height":"0","format":"<style>\n  .filled { \n      height: 100% !important;\n\n      padding: 0 !important;\n      margin: 0 !important;\n  }\n  .nr-dashboard-template {\n      padding: 0;\n      margin: 0;\n  }\n  \n  .rounded {\n  border-radius: 12px 12px 12px 12px;\n}\n \n   .bigfont {\n  font-size: 18px;\n}\n\n   .smallfont {\n  font-size: 12px;\n}\n  \n</style>\n\n<script>\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),100);\n    \n    });\n    \n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":270,"y":80,"wires":[[]]},{"id":"6d373725.c8e468","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"abajo der","order":10,"width":"2","height":"1","format":"<div class=\"momentaryabder vibrate filled bigfont rounded\" style=\"background-color:#c0392b\">\n<center>\n<md-button class=\"bigfont rounded\" style=\"background-color:#c0392b\"> \n    <i class=\"fa fa-reply fa-2x fa-rotate-180\"></i>\n</md-button> \n</center>\n</div>\n<script>\n(function($scope) {\n$('.momentaryabder').on('touchstart mousedown', function(e) {\n    e.preventDefault(); //prevent default behavior\n    navigator.vibrate(30);\n    $scope.send({\"payload\": 1});\n});\n\n$('.momentaryabder').on('touchend mouseup', function(e) {\n    e.preventDefault(); //prevent default behavior\n    $scope.send({\"payload\": 0});\n});\n})(scope);\n</script>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":240,"y":300,"wires":[["d87a71a0.3d1a8","4006c2d6.149f3c","d2fbbcf6.0bab8"]]},{"id":"781e7531.1f2f4c","type":"change","z":"e18da4f3.5835c8","name":"Motores On","rules":[{"t":"set","p":"motores","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":280,"wires":[["4f52c1dd.a2927"]]},{"id":"706ecacb.1e95d4","type":"change","z":"e18da4f3.5835c8","name":"Adelante","rules":[{"t":"set","p":"reversa","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":500,"wires":[["c4d42682.d7f8b8"]]},{"id":"d87a71a0.3d1a8","type":"change","z":"e18da4f3.5835c8","name":"Reversa","rules":[{"t":"set","p":"reversa","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":140,"wires":[["c4d42682.d7f8b8"]]},{"id":"d2fbbcf6.0bab8","type":"change","z":"e18da4f3.5835c8","name":"Right","rules":[{"t":"set","p":"payload","pt":"msg","to":"limiteDer","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":180,"wires":[["1dcbb497.44216b"]]},{"id":"99e2e07.362e12","type":"change","z":"e18da4f3.5835c8","name":"Left","rules":[{"t":"set","p":"payload","pt":"msg","to":"limiteIzq","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":220,"wires":[["1dcbb497.44216b"]]},{"id":"37d31fda.35ee1","type":"change","z":"e18da4f3.5835c8","name":"Center","rules":[{"t":"set","p":"payload","pt":"msg","to":"centro","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":260,"wires":[["1dcbb497.44216b"]]},{"id":"612876bf.698818","type":"link out","z":"edaabd89.17687","name":"radar-volante","links":["3b540816.53f838","6ab354ed.4d350c","3c4070fc.4b028","d3e3d9ee.ced988","32197481.2133ac"],"x":1075,"y":160,"wires":[]},{"id":"1dcbb497.44216b","type":"link out","z":"e18da4f3.5835c8","name":"telefono-volante","links":["32197481.2133ac"],"x":655,"y":220,"wires":[]},{"id":"b10eb39c.2990d","type":"switch","z":"edaabd89.17687","name":"auto?","property":"auto","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":160,"wires":[["612876bf.698818"]]},{"id":"f6376eb5.ee487","type":"ui_button","z":"f2d50a30.f36618","name":"","group":"d0600652.9f6778","order":0,"width":0,"height":0,"passthru":false,"label":"Apagar","tooltip":"","color":"","bgcolor":"","icon":"","payload":"¿Apagar?","payloadType":"str","topic":"","x":720,"y":100,"wires":[["c7c9120d.503b6"]]},{"id":"1bea80ba.8b11df","type":"link out","z":"f2d50a30.f36618","name":"ui-apagar","links":["fad8b02e.0f78e"],"x":975,"y":120,"wires":[]},{"id":"fad8b02e.0f78e","type":"link in","z":"9cafc7a.68acc38","name":"sistema-apagar","links":["1bea80ba.8b11df"],"x":175,"y":160,"wires":[["6233929.7aac46c","43696cf9.54a394"]]},{"id":"82d6ccc8.46431","type":"ui_button","z":"f2d50a30.f36618","name":"","group":"d0600652.9f6778","order":0,"width":0,"height":0,"passthru":false,"label":"Reiniciar","tooltip":"","color":"","bgcolor":"","icon":"","payload":"¿Reiniciar?","payloadType":"str","topic":"","x":720,"y":140,"wires":[["c7c9120d.503b6"]]},{"id":"74cceff.7dcf91","type":"change","z":"e18da4f3.5835c8","name":"Motores Off","rules":[{"t":"set","p":"motores","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":340,"wires":[["c4d42682.d7f8b8"]]},{"id":"c4d42682.d7f8b8","type":"link out","z":"e18da4f3.5835c8","name":"telefono-motores","links":["95cefd1c.670de"],"x":1135,"y":140,"wires":[]},{"id":"65fe454d.679b4c","type":"switch","z":"edaabd89.17687","name":"auto?","property":"auto","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":200,"wires":[["66589071.1813e"]]},{"id":"4f52c1dd.a2927","type":"change","z":"e18da4f3.5835c8","name":"Control temporal","rules":[{"t":"set","p":"temporal","pt":"global","to":"auto","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":280,"wires":[["c01e519e.d48c"]]},{"id":"4006c2d6.149f3c","type":"switch","z":"e18da4f3.5835c8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":300,"wires":[["781e7531.1f2f4c"],["c1018282.71a26"]]},{"id":"c01e519e.d48c","type":"change","z":"e18da4f3.5835c8","name":"auto off","rules":[{"t":"set","p":"auto","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":280,"wires":[["c4d42682.d7f8b8"]]},{"id":"c1018282.71a26","type":"change","z":"e18da4f3.5835c8","name":"Control temporal","rules":[{"t":"set","p":"auto","pt":"global","to":"temporal","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":340,"wires":[["a91dfbf1.5f2518"]]},{"id":"fa00a59c.3ae4d8","type":"change","z":"e18da4f3.5835c8","name":"motores on","rules":[{"t":"set","p":"motores","pt":"global","to":"true","tot":"bool"},{"t":"set","p":"llave","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":420,"wires":[["706ecacb.1e95d4"]]},{"id":"1a8da62c.120a2a","type":"switch","z":"e18da4f3.5835c8","name":"","property":"motores","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":440,"wires":[["fa00a59c.3ae4d8","c18012c8.ac916"],["cc003d9.8e204c","d35857a8.f3d428"]]},{"id":"cc003d9.8e204c","type":"change","z":"e18da4f3.5835c8","name":"motores off","rules":[{"t":"set","p":"motores","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"llave","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"auto","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"radar","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":460,"wires":[["706ecacb.1e95d4","2d8fd0fb.a3b02"]]},{"id":"6b30e0fb.8f6b7","type":"inject","z":"cf5e82b7.0252e","name":"","topic":"","payload":"","payloadType":"str","repeat":"0.05","crontab":"","once":false,"onceDelay":"5","x":170,"y":140,"wires":[["112002ee.90844d"]]},{"id":"112002ee.90844d","type":"file in","z":"cf5e82b7.0252e","name":"","filename":"/dev/shm/mjpeg/cam.jpg","format":"","chunk":false,"sendError":false,"encoding":"none","x":410,"y":140,"wires":[["ca8e7fb.af39e8"]]},{"id":"b6050598.75aff8","type":"template","z":"cf5e82b7.0252e","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<img width=\"320px\" height=\"240px\" src=\"data:image/jpg;base64,{{{payload}}}\">","output":"str","x":760,"y":140,"wires":[["4f5dbae8.8131d4"]]},{"id":"98c88e80.42ecd","type":"comment","z":"cf5e82b7.0252e","name":"Es necesario activar esto: https://elinux.org/RPi-Cam-Web-Interface","info":"","x":740,"y":220,"wires":[]},{"id":"602ee49e.66c18c","type":"comment","z":"cf5e82b7.0252e","name":"Regula el FPS pero causa delay","info":"","x":230,"y":220,"wires":[]},{"id":"91db8ad2.e95d28","type":"ui_template","z":"cf5e82b7.0252e","group":"aaad0e65.b3469","name":"Video","order":1,"width":"6","height":"6","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1190,"y":140,"wires":[[]]},{"id":"ca8e7fb.af39e8","type":"base64","z":"cf5e82b7.0252e","name":"","action":"str","property":"payload","x":600,"y":140,"wires":[["b6050598.75aff8"]]},{"id":"fccef6c3.7edba8","type":"comment","z":"cf5e82b7.0252e","name":"Habilitar y desplegar para empezar a correr la transmisión de video.","info":"","x":340,"y":60,"wires":[]},{"id":"620c087c.5f9378","type":"rpi-srf","z":"edaabd89.17687","d":true,"name":"Atras","topic":"SRF","pulse":"0.06","pins":"31,29","x":130,"y":100,"wires":[["2dcde8b0.a8bef8"]]},{"id":"182a9bb2.f1b124","type":"change","z":"edaabd89.17687","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"posAtr","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":100,"wires":[["f9fa9cbb.ebddb"]]},{"id":"2dcde8b0.a8bef8","type":"smooth","z":"edaabd89.17687","name":"","property":"payload","action":"mean","count":"3","round":"0","mult":"single","reduce":true,"x":260,"y":100,"wires":[["182a9bb2.f1b124"]]},{"id":"27504626.470f3a","type":"ui_switch","z":"f2d50a30.f36618","name":"","label":"Invertir derecha","tooltip":"","group":"e8574371.228a7","order":1,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":260,"y":220,"wires":[["10dc1baf.3a3314"]]},{"id":"e0a9b9d4.877a78","type":"ui_switch","z":"f2d50a30.f36618","name":"","label":"Invertir izquierda","tooltip":"","group":"e8574371.228a7","order":1,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":270,"y":280,"wires":[["36f01d8d.d49f72"]]},{"id":"10dc1baf.3a3314","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"invDer","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":220,"wires":[[]]},{"id":"36f01d8d.d49f72","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"invIzq","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":280,"wires":[[]]},{"id":"556918e7.34b298","type":"switch","z":"75bbb4d6.125e1c","name":"izquierda invertida?","property":"invIzq","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":360,"wires":[["7d2b2998.7f1de8"],["76609cbd.8da214"]]},{"id":"f7277129.8563c","type":"switch","z":"75bbb4d6.125e1c","name":"izquierda invertida?","property":"invIzq","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":440,"wires":[["76609cbd.8da214"],["7d2b2998.7f1de8"]]},{"id":"5c8c2bfe.279a24","type":"switch","z":"75bbb4d6.125e1c","name":"derecha invertida?","property":"invDer","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":480,"wires":[["346f5ced.7e90a4"],["3f1dd469.6dac1c"]]},{"id":"d15d94e.7096d68","type":"switch","z":"75bbb4d6.125e1c","name":"derecha invertida?","property":"invDer","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":540,"wires":[["3f1dd469.6dac1c"],["346f5ced.7e90a4"]]},{"id":"a91dfbf1.5f2518","type":"switch","z":"e18da4f3.5835c8","name":"T or F","property":"llave","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":830,"y":340,"wires":[["74cceff.7dcf91"],["c4d42682.d7f8b8","37d31fda.35ee1"]]},{"id":"f9fa9cbb.ebddb","type":"debug","z":"edaabd89.17687","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":570,"y":140,"wires":[]},{"id":"2d8fd0fb.a3b02","type":"link out","z":"e18da4f3.5835c8","name":"telefono-auto-off","links":["86d2629c.66825","8fb04e7f.a6b5f"],"x":655,"y":540,"wires":[]},{"id":"113a338b.8cf1bc","type":"delay","z":"edaabd89.17687","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"3","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":650,"y":340,"wires":[["69cd4ec9.a068b"]]},{"id":"4f5dbae8.8131d4","type":"delay","z":"cf5e82b7.0252e","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"5","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":970,"y":140,"wires":[["91db8ad2.e95d28"]]},{"id":"66589071.1813e","type":"link out","z":"edaabd89.17687","name":"distancia-radar","links":["95cefd1c.670de"],"x":1075,"y":200,"wires":[]},{"id":"46a49edf.fc9d","type":"comment","z":"edaabd89.17687","name":"Lecturas de Ultrasónicos","info":"","x":190,"y":60,"wires":[]},{"id":"c940ebd3.b0a938","type":"comment","z":"edaabd89.17687","name":"Barrido del radar","info":"","x":160,"y":340,"wires":[]},{"id":"3a97896b.acdfb6","type":"comment","z":"9cafc7a.68acc38","name":"Básicas ","info":"","x":90,"y":60,"wires":[]},{"id":"b75e0b15.5e00e8","type":"inject","z":"9cafc7a.68acc38","name":"Tomar foto","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":320,"wires":[["61de11a4.2504e"]]},{"id":"61de11a4.2504e","type":"exec","z":"9cafc7a.68acc38","command":"raspistill -rot 90 -o ventana.jpg","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":390,"y":320,"wires":[["e08dd66c.3ac128","216910b7.c4dfa"],["e08dd66c.3ac128"],["e08dd66c.3ac128"]]},{"id":"e08dd66c.3ac128","type":"debug","z":"9cafc7a.68acc38","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":430,"y":280,"wires":[]},{"id":"f80fbcf2.c0679","type":"exec","z":"9cafc7a.68acc38","command":"raspivid -rot 90 -o vid.h264","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":380,"y":380,"wires":[[],[],[]]},{"id":"8215b535.ad91e8","type":"inject","z":"9cafc7a.68acc38","name":"Tomar video","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":380,"wires":[["f80fbcf2.c0679"]]},{"id":"216910b7.c4dfa","type":"link out","z":"9cafc7a.68acc38","name":"TomarFoto_Begin","links":["74333ea.210e2c"],"x":595,"y":320,"wires":[]},{"id":"cbf92cd1.3fb89","type":"comment","z":"9cafc7a.68acc38","name":"Pruebas cámara","info":"","x":120,"y":260,"wires":[]},{"id":"53fa9773.81c238","type":"link in","z":"f2d50a30.f36618","name":"velMax_End","links":["1a34ed99.aebe62","aaae2e42.83086"],"x":135,"y":100,"wires":[["b5f8c48a.0f9938"]]},{"id":"eb9a2cd4.c1761","type":"link in","z":"f2d50a30.f36618","name":"distMin_End","links":["fae2078b.3f6498","39004b09.aef9e4"],"x":135,"y":160,"wires":[["80f0777d.2a3728"]]},{"id":"9c657611.242698","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"velMax","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":200,"y":120,"wires":[["aaae2e42.83086"]]},{"id":"17ddc6c1.2d71e9","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"distMin","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":200,"y":180,"wires":[["39004b09.aef9e4"]]},{"id":"aaae2e42.83086","type":"link out","z":"fa2d5faa.02b","name":"velMax_Begin","links":["53fa9773.81c238"],"x":315,"y":120,"wires":[]},{"id":"39004b09.aef9e4","type":"link out","z":"fa2d5faa.02b","name":"distMin_Begin","links":["eb9a2cd4.c1761"],"x":315,"y":180,"wires":[]},{"id":"3001a748.2f15f8","type":"comment","z":"fa2d5faa.02b","name":"Parámetros de manejo","info":"","x":200,"y":60,"wires":[]},{"id":"13d09a36.8f1546","type":"comment","z":"f2d50a30.f36618","name":"Parámetros de manejo","info":"","x":220,"y":40,"wires":[]},{"id":"8d21215e.52fa6","type":"link in","z":"f2d50a30.f36618","name":"ui-key_End","links":["30051913.1ce0c6","5b48c4b3.39a58c"],"x":155,"y":680,"wires":[["cacd2695.e682c8"]]},{"id":"760aa3d2.80a51c","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"ssid","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"70","x":550,"y":120,"wires":[["dbccc2e8.34c09"]]},{"id":"d9ce7045.f1501","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"psk","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"70","x":549,"y":177,"wires":[["5b48c4b3.39a58c"]]},{"id":"dbccc2e8.34c09","type":"link out","z":"fa2d5faa.02b","name":"ui-ssid_Begin","links":["3f6fbbbc.871304"],"x":655,"y":120,"wires":[]},{"id":"5b48c4b3.39a58c","type":"link out","z":"fa2d5faa.02b","name":"ui-key_Begin","links":["8d21215e.52fa6"],"x":655,"y":180,"wires":[]},{"id":"c241ac85.c9936","type":"comment","z":"fa2d5faa.02b","name":"Configuración WiFi","info":"","x":550,"y":60,"wires":[]},{"id":"a2f0ac78.50213","type":"comment","z":"f2d50a30.f36618","name":"Configuración WiFi","info":"","x":210,"y":580,"wires":[]},{"id":"92fde7e5.06b0d8","type":"link in","z":"f2d50a30.f36618","name":"invDer_End","links":["b50f2514.6d1478","29a9003e.839c8"],"x":135,"y":220,"wires":[["27504626.470f3a"]]},{"id":"706c9c81.5331c4","type":"link in","z":"f2d50a30.f36618","name":"invIzq_End","links":["a25d4a14.838dc8","69f2834.0d86d7c"],"x":135,"y":280,"wires":[["e0a9b9d4.877a78"]]},{"id":"1c38dc7.a34c524","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"invDer","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":240,"wires":[["29a9003e.839c8"]]},{"id":"36bc348e.ef7dfc","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"invIzq","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":190,"y":300,"wires":[["69f2834.0d86d7c"]]},{"id":"29a9003e.839c8","type":"link out","z":"fa2d5faa.02b","name":"invDer_Begin","links":["92fde7e5.06b0d8"],"x":315,"y":240,"wires":[]},{"id":"69f2834.0d86d7c","type":"link out","z":"fa2d5faa.02b","name":"invIzq_Begin","links":["706c9c81.5331c4"],"x":315,"y":300,"wires":[]},{"id":"5b7ce55.fe2bb1c","type":"comment","z":"f2d50a30.f36618","name":"Básicos","info":"","x":710,"y":40,"wires":[]},{"id":"1e70c03b.91ded","type":"ui_slider","z":"f2d50a30.f36618","name":"","label":"Volante","tooltip":"","group":"6f7c3b98.411e14","order":7,"width":0,"height":0,"passthru":true,"outs":"end","topic":"","min":"100","max":"0","step":"1","x":440,"y":340,"wires":[["ac2daf70.292c1"]]},{"id":"ac2daf70.292c1","type":"link out","z":"f2d50a30.f36618","name":"volante_Begin","links":["a0c421c5.23025","32197481.2133ac"],"x":555,"y":340,"wires":[]},{"id":"f82c5b61.296d28","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Volante","host":"localhost","port":8888,"pin":"26","set":"","level":"0","out":"ser","sermin":"500","sermax":"2500","x":700,"y":180,"wires":[]},{"id":"e2d2cffc.fc39d","type":"range","z":"75bbb4d6.125e1c","d":true,"minin":"0","maxin":"9","minout":"65","maxout":"25","action":"scale","round":true,"property":"payload","name":"map(0,9,65,25)","x":520,"y":60,"wires":[["f82c5b61.296d28","ff3858e.0ea4ca8"]]},{"id":"28c7c31.e33f53c","type":"switch","z":"75bbb4d6.125e1c","d":true,"name":"reversa?","property":"reversa","propertyType":"global","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":80,"wires":[["e2d2cffc.fc39d"],["70bc9722.53ece8"]]},{"id":"70bc9722.53ece8","type":"range","z":"75bbb4d6.125e1c","d":true,"minin":"0","maxin":"9","minout":"25","maxout":"65","action":"scale","round":true,"property":"payload","name":"map(0,9,25,65)","x":520,"y":100,"wires":[["f82c5b61.296d28","ff3858e.0ea4ca8"]]},{"id":"32197481.2133ac","type":"link in","z":"75bbb4d6.125e1c","name":"volante","links":["1dcbb497.44216b","612876bf.698818","ac2daf70.292c1"],"x":155,"y":180,"wires":[["28c7c31.e33f53c","f82c5b61.296d28"]]},{"id":"f2ade29e.46535","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":530,"y":300,"wires":[["1daee1e5.cf247e"]]},{"id":"1daee1e5.cf247e","type":"change","z":"fa2d5faa.02b","name":"","rules":[{"t":"set","p":"posRadar","pt":"global","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":300,"wires":[[]]},{"id":"985b3eef.1838e","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":530,"y":340,"wires":[["833fec0e.11a3c","10827656.6d430a"]]},{"id":"833fec0e.11a3c","type":"change","z":"fa2d5faa.02b","name":"","rules":[{"t":"set","p":"motores","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":360,"wires":[[]]},{"id":"b72b0558.e88948","type":"inject","z":"fa2d5faa.02b","name":"centro","topic":"","payload":"42.5","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"10","x":530,"y":380,"wires":[["76c16486.346e7c"]]},{"id":"76c16486.346e7c","type":"link out","z":"fa2d5faa.02b","name":"ServoPos_Begin","links":["d4e9751.f286c88","f1cf7c6c.e692f"],"x":815,"y":380,"wires":[]},{"id":"4cfded1a.e2da64","type":"comment","z":"fa2d5faa.02b","name":"Radar","info":"","x":510,"y":240,"wires":[]},{"id":"10827656.6d430a","type":"link out","z":"fa2d5faa.02b","name":"InitInFalse","links":["35f88c95.115744","9d2b75bb.7e76b8"],"x":815,"y":340,"wires":[]},{"id":"6268e87c.cc5128","type":"link out","z":"f2d50a30.f36618","name":"distancia-radar","links":["95cefd1c.670de"],"x":1215,"y":620,"wires":[]},{"id":"23bc94a3.88ab2c","type":"ui_switch","z":"f2d50a30.f36618","d":true,"name":"","label":"Autonomo","tooltip":"","group":"aaad0e65.b3469","order":11,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":770,"y":620,"wires":[["eafbaf56.74eb2","7f3defd2.ea40d"]]},{"id":"eafbaf56.74eb2","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"auto","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":620,"wires":[["6268e87c.cc5128","23bc94a3.88ab2c"]]},{"id":"709d3174.443f","type":"ui_switch","z":"f2d50a30.f36618","d":true,"name":"RadarSetup","label":"Radar","tooltip":"","group":"6f7c3b98.411e14","order":4,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":770,"y":760,"wires":[["e6942af9.ff5fb8","cf16caad.af6fc8"]]},{"id":"e6942af9.ff5fb8","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"radar","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":760,"wires":[["709d3174.443f","de479599.db06c8"]]},{"id":"7f3defd2.ea40d","type":"switch","z":"f2d50a30.f36618","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":930,"y":680,"wires":[["cf16caad.af6fc8","e6942af9.ff5fb8"]]},{"id":"cf16caad.af6fc8","type":"switch","z":"f2d50a30.f36618","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":1110,"y":680,"wires":[["eafbaf56.74eb2","e6942af9.ff5fb8"]]},{"id":"8fb04e7f.a6b5f","type":"link in","z":"f2d50a30.f36618","name":"radar-auto","links":["2d8fd0fb.a3b02"],"x":935,"y":640,"wires":[["eafbaf56.74eb2"]]},{"id":"9d2b75bb.7e76b8","type":"link in","z":"f2d50a30.f36618","name":"InitinFalse","links":["d5e26c7.21ff49","10827656.6d430a"],"x":775,"y":680,"wires":[["709d3174.443f","eafbaf56.74eb2","de479599.db06c8"]]},{"id":"de479599.db06c8","type":"ui_switch","z":"f2d50a30.f36618","d":true,"name":"RadarBotones","label":"Radar","tooltip":"","group":"aaad0e65.b3469","order":12,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":780,"y":720,"wires":[["cf16caad.af6fc8"]]},{"id":"b670adea.8267e","type":"comment","z":"f2d50a30.f36618","name":"Switches Radar (Explicación)","info":"El switch autónomo enciende el modo autónomo y el radar pero sólo apaga el modo, el switch de radar sólo controla el radar.","x":780,"y":560,"wires":[]},{"id":"983c83e0.7ee2c","type":"inject","z":"fa2d5faa.02b","name":"centro","topic":"","payload":"centro","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"10","x":170,"y":360,"wires":[["24acc816.9d3568"]]},{"id":"24acc816.9d3568","type":"link out","z":"fa2d5faa.02b","name":"volanteSlider_Begin","links":["21b38ba7.f97244"],"x":315,"y":360,"wires":[]},{"id":"246d9f32.d6a76","type":"link out","z":"edaabd89.17687","name":"distRegistrada_Begin","links":["a65ae476.129c68","aae40517.ce4718"],"x":615,"y":240,"wires":[]},{"id":"2925cc54.a01064","type":"link out","z":"edaabd89.17687","name":"radarDash_Begin","links":[],"x":735,"y":240,"wires":[]},{"id":"69cd4ec9.a068b","type":"link out","z":"edaabd89.17687","name":"ServoPosSlider_Begin","links":["99405ba8.c2ecd8","4a87ca63.44aab4"],"x":755,"y":340,"wires":[]},{"id":"47a1f60f.4b07f8","type":"ui_chart","z":"f2d50a30.f36618","d":true,"name":"","group":"6f7c3b98.411e14","order":5,"width":0,"height":0,"label":"Radar","chartType":"radar","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"150","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":950,"y":300,"wires":[[]]},{"id":"45e066d7.d3b1f8","type":"ui_gauge","z":"f2d50a30.f36618","d":true,"name":"","group":"6f7c3b98.411e14","order":1,"width":0,"height":0,"gtype":"gage","title":"Distancia para colisión","label":"cm","format":"{{value}}","min":0,"max":"100","colors":["#b50000","#e6e600","#39ca38"],"seg1":"","seg2":"","x":980,"y":260,"wires":[]},{"id":"7af1baf1.e56474","type":"delay","z":"f2d50a30.f36618","name":"","pauseType":"rate","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":790,"y":260,"wires":[["45e066d7.d3b1f8"]]},{"id":"5ba93aca.1649b4","type":"delay","z":"f2d50a30.f36618","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"3","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":810,"y":300,"wires":[["47a1f60f.4b07f8"]]},{"id":"aae40517.ce4718","type":"link in","z":"f2d50a30.f36618","name":"distRegistrada_End","links":["246d9f32.d6a76"],"x":675,"y":260,"wires":[["7af1baf1.e56474"]]},{"id":"3d327f99.c13f1","type":"link in","z":"f2d50a30.f36618","name":"radarDash_End","links":[],"x":675,"y":300,"wires":[["5ba93aca.1649b4"]]},{"id":"e4d0934.2823a7","type":"comment","z":"f2d50a30.f36618","name":"Gráficas Radar","info":"","x":740,"y":200,"wires":[]},{"id":"9f27cb59.1220c8","type":"link out","z":"edaabd89.17687","name":"ServoPos_Begin","links":["d4e9751.f286c88","99405ba8.c2ecd8","f1cf7c6c.e692f","4a87ca63.44aab4"],"x":755,"y":400,"wires":[]},{"id":"72ced1c7.d5e7a","type":"pi-gpiod out","z":"75bbb4d6.125e1c","name":"Servo Sensor","host":"localhost","port":8888,"pin":"10","set":"","level":"0","out":"ser","sermin":"500","sermax":"2500","x":680,"y":300,"wires":[]},{"id":"f1cf7c6c.e692f","type":"link in","z":"75bbb4d6.125e1c","name":"ServoPos_End","links":["76c16486.346e7c","9f27cb59.1220c8"],"x":155,"y":300,"wires":[["72ced1c7.d5e7a"]]},{"id":"bcb1a5ea.c11ef8","type":"comment","z":"75bbb4d6.125e1c","name":"Servo Volante","info":"","x":210,"y":80,"wires":[]},{"id":"f1261778.c0aab8","type":"comment","z":"75bbb4d6.125e1c","name":"Servo Radar","info":"","x":210,"y":260,"wires":[]},{"id":"bde6cfe1.24d03","type":"comment","z":"75bbb4d6.125e1c","name":"PWM Motores","info":"","x":210,"y":360,"wires":[]},{"id":"c626a116.0698e","type":"ui_slider","z":"f2d50a30.f36618","d":true,"name":"Sensor Slider","label":"Sensor","tooltip":"","group":"6f7c3b98.411e14","order":6,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":"75","max":"20","step":"0.5","x":1000,"y":220,"wires":[[]]},{"id":"4a87ca63.44aab4","type":"link in","z":"f2d50a30.f36618","name":"ServoPosSlider_End","links":["69cd4ec9.a068b","9f27cb59.1220c8"],"x":875,"y":220,"wires":[["c626a116.0698e"]]},{"id":"5ce31fa1.2782","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"Activar GPIOD","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":200,"y":640,"wires":[["9da66f17.e7bd7"]]},{"id":"9da66f17.e7bd7","type":"exec","z":"fa2d5faa.02b","command":"sudo pigpiod","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":370,"y":640,"wires":[[],[],[]]},{"id":"c7c9120d.503b6","type":"ui_toast","z":"f2d50a30.f36618","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":870,"y":120,"wires":[["1bea80ba.8b11df"]]},{"id":"ba846a4.8285298","type":"function","z":"9cafc7a.68acc38","name":"Formato wpa_supplicant","func":"var ssid = global.get('ssid');\nvar psk = global.get('psk');\n\n\nvar formato = 'ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev' \nformato += ' \\n ';\nformato += 'update_config=1'\nformato += ' \\n ';\nformato += 'country=MX'\nformato += ' \\n ';\n\nformato += 'network={'\nformato += ' \\n ';\nformato += 'ssid='\nformato += ssid;\nformato += ' \\n ';\nformato += 'psk=';\nformato += psk\nformato += ' \\n ';\nformato += 'key_mgmt=WPA-PSK'\nformato += ' \\n ';\nformato += \"}\";\n\nmsg = {payload:formato};\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":120,"wires":[["34dd49f2.441986"]]},{"id":"34dd49f2.441986","type":"file","z":"9cafc7a.68acc38","name":"","filename":"/etc/wpa_supplicant/wpa_supplicant.conf","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":1040,"y":120,"wires":[[]]},{"id":"73c28399.48fcdc","type":"switch","z":"2da2b35e.ce678c","name":"GoogleNotifyDestination","property":"destination","propertyType":"msg","rules":[{"t":"eq","v":"living","vt":"str"},{"t":"eq","v":"bureau","vt":"str"},{"t":"eq","v":"all","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":450,"y":260,"wires":[["57710af4.c4e894"],["bfd9c137.14da6"],["57710af4.c4e894","bfd9c137.14da6"]],"outputLabels":["Google Home","Google Home mini",""]},{"id":"57710af4.c4e894","type":"googlehome-notifier-offline","z":"2da2b35e.ce678c","server":"30684173.e2231e","name":"Google Home","x":800,"y":180,"wires":[]},{"id":"bfd9c137.14da6","type":"googlehome-notifier-offline","z":"2da2b35e.ce678c","server":"e12130ea.34705","name":"Google Home Mini","x":790,"y":320,"wires":[]},{"id":"687a9f02.3bc6d","type":"change","z":"2da2b35e.ce678c","name":"","rules":[{"t":"set","p":"cacheFolder","pt":"msg","to":"d:\\tmp\\GHCache","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":260,"wires":[["73c28399.48fcdc"]]},{"id":"b916bff1.91767","type":"inject","z":"ac3d1312.01aae","name":"","topic":"","payload":"ola! soey Vahpri","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":100,"wires":[["c676a7b0.bb1cf8"]]},{"id":"c676a7b0.bb1cf8","type":"change","z":"ac3d1312.01aae","name":"","rules":[{"t":"set","p":"emitVolume","pt":"msg","to":"100","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":100,"wires":[["48eccc6f.d0ea84"]]},{"id":"48eccc6f.d0ea84","type":"googlehome-notifier-offline","z":"ac3d1312.01aae","server":"5ebdb320.8a967c","name":"","x":680,"y":100,"wires":[]},{"id":"22d03759.716778","type":"comment","z":"ac3d1312.01aae","name":"Manda cadena de texto a Google Home","info":"","x":210,"y":60,"wires":[]},{"id":"56adb7f5.b71ee8","type":"comment","z":"ac3d1312.01aae","name":"Configurar volumen","info":"","x":430,"y":140,"wires":[]},{"id":"ae4ceb59.2aada8","type":"ui_text_input","z":"ac3d1312.01aae","name":"","label":"","tooltip":"Dime qué decir","group":"aaad0e65.b3469","order":13,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"","x":120,"y":160,"wires":[["c676a7b0.bb1cf8"]]},{"id":"a6e260a3.a2bec","type":"link out","z":"3c70d9e1.8b9426","name":"ToTelegram","links":["b378db38.39b268"],"x":1055,"y":220,"wires":[]},{"id":"f25cf7f8.158a98","type":"function","z":"3c70d9e1.8b9426","name":"Formato ui","func":"var text = msg.payload;\nmsg.payload='Tu nuevo acceso remoto ngrok es: '+ text + '/ui';\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":200,"wires":[["a6e260a3.a2bec"]]},{"id":"8bc8eb8.fbaa718","type":"switch","z":"3c70d9e1.8b9426","name":"filtro \"null\"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":160,"wires":[["9ddc718c.49cce"],["f32f5f11.c7dbf"]]},{"id":"686dd925.b34c48","type":"function","z":"3c70d9e1.8b9426","name":"Formato editor","func":"var text = msg.payload;\nmsg.payload='Tu nuevo acceso remoto ngrok es: '+ text + '';\nreturn msg;","outputs":1,"noerr":0,"x":880,"y":160,"wires":[["a6e260a3.a2bec"]]},{"id":"9ddc718c.49cce","type":"switch","z":"3c70d9e1.8b9426","name":"topic","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"editor","vt":"str"},{"t":"eq","v":"ui","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":710,"y":160,"wires":[["686dd925.b34c48"],["f25cf7f8.158a98"]]},{"id":"e62e96f4.56a988","type":"link in","z":"3c70d9e1.8b9426","name":"toNgrok","links":["d522bc48.7ec28"],"x":115,"y":220,"wires":[["a5882927.75d598"]]},{"id":"f32f5f11.c7dbf","type":"change","z":"3c70d9e1.8b9426","name":"Off noti","rules":[{"t":"set","p":"payload","pt":"msg","to":"Acceso ngrok apagado.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":240,"wires":[["a6e260a3.a2bec"]]},{"id":"a2c0976f.dfe7c8","type":"ngrok","z":"3c70d9e1.8b9426","port":"1880","creds":"a8bd6396.c389b","region":"us","subdomain":"","name":"ngrok:1880","auth":"","x":370,"y":180,"wires":[["8bc8eb8.fbaa718"]]},{"id":"94c50b8a.c11148","type":"ngrok","z":"3c70d9e1.8b9426","port":"5000","creds":"a8bd6396.c389b","region":"us","subdomain":"","name":"ngrok:5000","auth":"","x":370,"y":260,"wires":[["35f3265.20b14da"]]},{"id":"a5882927.75d598","type":"switch","z":"3c70d9e1.8b9426","name":"topic","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ui","vt":"str"},{"t":"eq","v":"editor","vt":"str"},{"t":"eq","v":"octoprint","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":210,"y":220,"wires":[["a2c0976f.dfe7c8"],["a2c0976f.dfe7c8"],["94c50b8a.c11148"]]},{"id":"35f3265.20b14da","type":"switch","z":"3c70d9e1.8b9426","name":"filtro \"null\"","property":"payload","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":280,"wires":[["f32f5f11.c7dbf"],["ccf442d4.7921b"]]},{"id":"ccf442d4.7921b","type":"function","z":"3c70d9e1.8b9426","name":"Formato Octoprint","func":"var text = msg.payload;\nmsg.payload='Tu nuevo acceso remoto ngrok es: '+ text + '';\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":280,"wires":[["a6e260a3.a2bec"]]},{"id":"ce5d4804.1e6158","type":"comment","z":"3c70d9e1.8b9426","name":"Añade el \"/xxx\" si aplica","info":"","x":880,"y":120,"wires":[]},{"id":"99569b38.65ca68","type":"debug","z":"5ffba829.d0aa18","name":"Telegram","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":200,"wires":[]},{"id":"b1d8c1cd.f499f","type":"function","z":"5ffba829.d0aa18","name":"Formato para Telegram","func":"var text = msg.payload;\nmsg.payload='{\\n\"text\": \"'+ text + '\"\\n}'\n//',\\n\"parse_mode\": \"Markdown\"\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":220,"wires":[["dbb044b9.03e1a8","99569b38.65ca68"]]},{"id":"b378db38.39b268","type":"link in","z":"5ffba829.d0aa18","name":"toTelegram","links":["2ee2f44.af4b60c","d6c75b00.d39148","592da6a.2e70a58","9d675fa0.f90c","ec254b84.b17bc8","a3fe156e.ad71d8","73af0803.c282c8","2c8ae8da.bf31f8","dc5307d8.6fd2e8","4905f533.8fc32c","a6e260a3.a2bec"],"x":915,"y":220,"wires":[["b1d8c1cd.f499f"]]},{"id":"dffb8dba.d730e","type":"change","z":"5ffba829.d0aa18","name":"on","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":180,"wires":[["d522bc48.7ec28"]]},{"id":"65542c14.4945a4","type":"change","z":"5ffba829.d0aa18","name":"ui","rules":[{"t":"set","p":"topic","pt":"msg","to":"ui","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":140,"wires":[["dffb8dba.d730e"]]},{"id":"945f1a5e.4d6e58","type":"change","z":"5ffba829.d0aa18","name":"editor","rules":[{"t":"set","p":"topic","pt":"msg","to":"editor","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":180,"wires":[["dffb8dba.d730e"]]},{"id":"d522bc48.7ec28","type":"link out","z":"5ffba829.d0aa18","name":"ToNgrok","links":["7c697255.b465fc","1e91adea.262222","e62e96f4.56a988"],"x":775,"y":220,"wires":[]},{"id":"3a2e286.bb254d8","type":"change","z":"5ffba829.d0aa18","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":260,"wires":[["d522bc48.7ec28"]]},{"id":"c52b9c27.9227b","type":"change","z":"5ffba829.d0aa18","name":"editor","rules":[{"t":"set","p":"topic","pt":"msg","to":"editor","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":260,"wires":[["3a2e286.bb254d8"]]},{"id":"d23fd629.9b5818","type":"change","z":"5ffba829.d0aa18","name":"octoprint","rules":[{"t":"set","p":"topic","pt":"msg","to":"octoprint","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":220,"wires":[["dffb8dba.d730e"]]},{"id":"95717505.34f7e8","type":"telegrambot-command","z":"5ffba829.d0aa18","name":"/ngrok","bot":"7ab72cee.d66ef4","command":"/ngrok","commandType":"str","commandCase":false,"x":170,"y":200,"wires":[["12aebaac.adc545"]]},{"id":"12aebaac.adc545","type":"telegrambot-switch","z":"5ffba829.d0aa18","name":"","bot":"7ab72cee.d66ef4","chatId":"","question":"ui or editor?","answers":["ui","editor","octoprint","off"],"outputs":5,"autoAnswerCallback":true,"timeoutValue":"1","timeoutUnits":"min","x":320,"y":200,"wires":[["65542c14.4945a4"],["945f1a5e.4d6e58"],["d23fd629.9b5818"],["c52b9c27.9227b"],["f0ae2810.a03b88"]]},{"id":"dbb044b9.03e1a8","type":"telegrambot-payload","z":"5ffba829.d0aa18","name":"Send","bot":"7ab72cee.d66ef4","chatId":"","sendMethod":"sendMessage","payload":"","x":1290,"y":320,"wires":[[]]},{"id":"f0ae2810.a03b88","type":"change","z":"5ffba829.d0aa18","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"No recibí respuesta","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":320,"wires":[["dbb044b9.03e1a8"]]},{"id":"247752f5.809ade","type":"ui_numeric","z":"f2d50a30.f36618","name":"","label":"Centro","tooltip":"","group":"6f7c3b98.411e14","order":7,"width":0,"height":0,"wrap":true,"passthru":false,"topic":"","format":"{{value}}","min":0,"max":"100","step":1,"x":230,"y":400,"wires":[["88846d78.2a08","1e70c03b.91ded"]]},{"id":"88846d78.2a08","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"centro","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":400,"wires":[[]]},{"id":"8f9ae099.00fe5","type":"ui_numeric","z":"f2d50a30.f36618","name":"","label":"Límite Derecho","tooltip":"","group":"6f7c3b98.411e14","order":7,"width":0,"height":0,"wrap":true,"passthru":false,"topic":"","format":"{{value}}","min":0,"max":"100","step":1,"x":260,"y":460,"wires":[["26ff1f77.2034a","1e70c03b.91ded"]]},{"id":"b847d441.2d5a88","type":"ui_numeric","z":"f2d50a30.f36618","name":"","label":"Límite Izquierdo","tooltip":"","group":"6f7c3b98.411e14","order":7,"width":0,"height":0,"wrap":true,"passthru":false,"topic":"","format":"{{value}}","min":0,"max":"100","step":1,"x":240,"y":520,"wires":[["83fc0200.00413","1e70c03b.91ded"]]},{"id":"26ff1f77.2034a","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"limiteDer","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":460,"wires":[[]]},{"id":"83fc0200.00413","type":"change","z":"f2d50a30.f36618","name":"","rules":[{"t":"set","p":"limiteIzq","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":520,"wires":[[]]},{"id":"21311107.6365be","type":"link in","z":"f2d50a30.f36618","name":"ui-lim-der","links":["874fb91b.572f78"],"x":135,"y":460,"wires":[["8f9ae099.00fe5"]]},{"id":"3d6c8254.5b79fe","type":"link in","z":"f2d50a30.f36618","name":"ui-lim-izq","links":["a7dd29b.0a071d8"],"x":115,"y":520,"wires":[["b847d441.2d5a88"]]},{"id":"ff3858e.0ea4ca8","type":"debug","z":"75bbb4d6.125e1c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":80,"wires":[]},{"id":"e4911cad.b3c4d","type":"link in","z":"f2d50a30.f36618","name":"volanteSlider_End","links":["1d751d20.328d13"],"x":135,"y":340,"wires":[["1e70c03b.91ded"]]},{"id":"21b38ba7.f97244","type":"link in","z":"f2d50a30.f36618","name":"ui-centro","links":["24acc816.9d3568","119e414.cafd7bf"],"x":115,"y":400,"wires":[["247752f5.809ade"]]},{"id":"25c2c75c.f1a3a8","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"limiteDer","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"10","x":200,"y":420,"wires":[["874fb91b.572f78"]]},{"id":"874fb91b.572f78","type":"link out","z":"fa2d5faa.02b","name":"init-limiteDer","links":["21311107.6365be"],"x":335,"y":420,"wires":[]},{"id":"bee827cd.7642e8","type":"inject","z":"fa2d5faa.02b","name":"","topic":"","payload":"limiteIzq","payloadType":"global","repeat":"","crontab":"","once":true,"onceDelay":"10","x":200,"y":480,"wires":[["a7dd29b.0a071d8"]]},{"id":"a7dd29b.0a071d8","type":"link out","z":"fa2d5faa.02b","name":"init-limiteIzq","links":["3d6c8254.5b79fe"],"x":335,"y":480,"wires":[]},{"id":"c18012c8.ac916","type":"change","z":"e18da4f3.5835c8","name":"Color Rojo","rules":[{"t":"set","p":"payload","pt":"msg","to":"background-color:#c0392b","tot":"str"},{"t":"set","p":"colorCentro","pt":"global","to":"background-color:#c0392b","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":400,"wires":[["c8039da2.d0fb9"]]},{"id":"d35857a8.f3d428","type":"change","z":"e18da4f3.5835c8","name":"Color Azul","rules":[{"t":"set","p":"payload","pt":"msg","to":"background-color:#009999","tot":"str"},{"t":"set","p":"colorCentro","pt":"global","to":"background-color:#009999","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":480,"wires":[["c8039da2.d0fb9"]]},{"id":"5ccf5614.61ec78","type":"inject","z":"e18da4f3.5835c8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"0","x":370,"y":520,"wires":[["d35857a8.f3d428"]]},{"id":"541508e3.ec4608","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"blue","order":4,"width":"2","height":"2","format":"\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#2980b9\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":590,"y":760,"wires":[[]]},{"id":"2dc6dcf1.d54ef4","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"red","order":2,"width":"2","height":"2","format":"\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":590,"y":680,"wires":[[]]},{"id":"6447283b.c53a68","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"green","order":3,"width":"2","height":"2","format":"\n<md-button class=\"filled touched bigfont rounded vibrate\" style=\"background-color:#27ae60\" ng-click=\"send({payload: 'Hello World'})\"> \n    Green<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":590,"y":720,"wires":[[]]},{"id":"6a890c18.da7534","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"","order":5,"width":"2","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#16a085\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":600,"y":840,"wires":[[]]},{"id":"55cf792b.7d1018","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"","order":6,"width":"2","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#e67e22\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":600,"y":800,"wires":[[]]},{"id":"57347f.2266bb8","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"on","order":7,"width":"1","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#34495e\" ng-click=\"send({payload: 'Hello World'})\"> \n    On\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":590,"y":880,"wires":[[]]},{"id":"5d925610.b6d0b8","type":"ui_template","z":"e18da4f3.5835c8","group":"24e743f9.df8a9c","name":"off","order":8,"width":"1","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#8e44ad\" ng-click=\"send({payload: 'Hello World'})\"> \n    Off\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":590,"y":920,"wires":[[]]},{"id":"b6a6cfd7.105fc","type":"ui_template","z":"e18da4f3.5835c8","group":"aaad0e65.b3469","name":"stuff","order":14,"width":"0","height":"0","format":"<style>\n  .filled { \n      height: 100% !important;\n\n      padding: 0 !important;\n      margin: 0 !important;\n  }\n  .nr-dashboard-template {\n      padding: 0;\n      margin: 0;\n  }\n  \n  .rounded {\n  border-radius: 12px 12px 12px 12px;\n}\n \n   .bigfont {\n  font-size: 18px;\n}\n\n   .smallfont {\n  font-size: 12px;\n}\n  \n</style>\n\n<script>\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),100);\n    \n    });\n    \n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":230,"y":40,"wires":[[]]},{"id":"2fa68488.0814dc","type":"debug","z":"e18da4f3.5835c8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":600,"y":60,"wires":[]},{"id":"1ca044ff.64926b","type":"inject","z":"e18da4f3.5835c8","name":"","topic":"","payload":"colorCentro","payloadType":"global","repeat":"1","crontab":"","once":true,"onceDelay":"0","x":130,"y":520,"wires":[["c8039da2.d0fb9"]]}]